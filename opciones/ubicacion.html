<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>GeoAR.js Demo</title>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            navigator.geolocation.getCurrentPosition(function (position) {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;

                console.log("Latitud: " + latitude);
                console.log("Longitud: " + longitude);
                alert("Tu ubicación es:\nLatitud: " + latitude + "\nLongitud: " + longitude);

                // Actualiza las coordenadas del objeto en la escena
                const entity = document.querySelector("[gps-entity-place]");
                entity.setAttribute("gps-entity-place", `longitude: ${longitude}; latitude: ${latitude}`);
            }, function (error) {
                console.error("Error obteniendo ubicación: ", error.message);
                alert("No se pudo obtener la ubicación. Asegúrate de permitir el acceso.");
            });
        });
    </script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene
        vr-mode-ui="enabled: false"
        embedded
        arjs="sourceType: webcam; sourceWidth: 1280; sourceHeight: 960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;">
        
        <!-- Cono con coordenadas dinámicas -->
        <a-entity 
            geometry="primitive: cone" 
            rotation="0 180 0" 
            scale="0.15 0.15 0.15" 
            gps-entity-place="longitude: 0; latitude: 0;">
        </a-entity>

        <!-- Cámara con soporte GPS -->
        <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>
</body>
</html>
